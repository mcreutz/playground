repositories:
  - name: grafana
    url: https://grafana.github.io/helm-charts
  - name: prometheus-community
    url: https://prometheus-community.github.io/helm-charts

releases:
  - name: namespaces
    chart: ./namespaces
    namespace: default
  - name: kube-prometheus-stack
    chart: prometheus-community/kube-prometheus-stack
    namespace: monitoring
    needs:
      - default/namespaces
    disableValidationOnInstall: true # needed for CRDs installatino with this chart
    # values:
    #   - monitoring/kube-prometheus-stack-values.yaml
  - name: loki
    chart: grafana/loki
    namespace: monitoring
    needs:
      - default/namespaces
      - monitoring/promtail # testing
    values:
      - monitoring/loki-values.yaml
    disableValidationOnInstall: true # needed for CRDs installatino with this chart
  - name: promtail
    chart: grafana/promtail
    namespace: monitoring
    needs:
      - default/namespaces
    values:
      - monitoring/promtail-values.yaml

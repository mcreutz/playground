environments:
  default:
    values:
      - shared_values.yaml
---

repositories:

  - name: prometheus-community
    url: https://prometheus-community.github.io/helm-charts

  - name: grafana
    url: https://grafana.github.io/helm-charts


releases:

  - name: loki
    chart: grafana/loki
    version: 6.27.0
    namespace: monitoring
    values:
      - loki_values.yaml.gotmpl
    # wait: true

  - name: kube-prometheus-stack
    chart: prometheus-community/kube-prometheus-stack
    version: 69.4.1
    namespace: monitoring
    values:
      - prometheus_values.yaml.gotmpl
    needs:
      - monitoring/loki

  - name: promtail
    chart: grafana/promtail
    version: 6.16.6
    namespace: monitoring
    values:
      - promtail_values.yaml.gotmpl
    needs:
      - monitoring/loki
      - monitoring/kube-prometheus-stack

